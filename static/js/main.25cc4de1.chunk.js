(this["webpackJsonpCodive-site"]=this["webpackJsonpCodive-site"]||[]).push([[0],{115:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),i=(a(81),a(17)),o=a(18),s=a(19),u=a(20),d=(a(82),a(28)),m=a(7),h=a.n(m),f=a(21),p=a(30),v=(a(84),a(64)),E=a.n(v),g=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={date_start:new Date,date_end:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.dates;t.date_start;return r.a.createElement(E.a,{value:a,options:{mode:"range",dateFormat:"d/m/Y",enableTime:!0},onChange:function(t){return e.props.onChange(t)}})}}]),a}(n.Component);var C=function(e){var t=e.casesInWorld,a=e.deathInWorld,n=e.healedInWorld,l=e.formattedDate;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-column p-10"},r.a.createElement("div",null,r.a.createElement("p",null,"Total Coronavirus cases in the world : ",new Intl.NumberFormat("it-IT").format(t))),r.a.createElement("div",null,r.a.createElement("p",null,"Total deaths in the world : ",new Intl.NumberFormat("it-IT").format(a))),r.a.createElement("div",null,r.a.createElement("p",null,"Total healed in the world : ",new Intl.NumberFormat("it-IT").format(n))),r.a.createElement("div",null,r.a.createElement("p",null," Last update info : ",l))))},b=a(23),w=a.n(b),x=(a(89),a(153)),k=a(145);var y=function(e){return r.a.createElement(k.a,{control:r.a.createElement(x.a,{size:e.size,checked:e.checked,onChange:function(){return e.onChange()}}),label:"Filter per date"})},D=a(68);function O(e){var t=r.a.useMemo((function(){return{type:"area"}}),[]),a=e.data;return a.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"container",style:{height:"600px",display:"flex",flex:1}},r.a.createElement(D.Chart,{data:a,series:t,axes:e.axes,tooltip:!0}))):r.a.createElement("div",null,r.a.createElement("p",null,"No data available"))}var j=function(e){return r.a.createElement("div",{className:"loader center"},r.a.createElement("i",{className:"fa fa-cog fa-spin fa-7x"}))},N=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._handleChangeCalendar=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isReadyChart:!1,dataForChart:null}),a=null,r=n.state.timeseries,!(t.length>1)){e.next=9;break}return e.next=6,n.filterMultipleDates(t,r);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,n.filterSingleDate(t[0],r);case 11:a=e.sent;case 12:return console.log(a),e.next=15,n.setState({stats:a,period:t});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!0,deathInWorld:0,casesInWorld:0,healedInWorld:0,lastUpdate:null,showCalendar:!1,timeseries:null,period:null},n._handleChangeCalendar=n._handleChangeCalendar.bind(Object(p.a)(n)),n._handleToggleCalendar=n._handleToggleCalendar.bind(Object(p.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.items){e.next=6;break}return t=this.props.items,e.next=4,this.setInitialState(t);case 4:return e.next=6,this.updateChart(this.state.timeseries);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateChart",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filteredTimeseries:t});case 2:return e.next=4,this.prepareDataForChart(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInitialState",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({deathInWorld:t.deaths,casesInWorld:t.confirmed,healedInWorld:t.recovered,lastUpdate:new Date(t.last_update),isLoading:!1,timeseries:t.ts,filteredTimeseries:[],dataForChart:null,isReadyChart:!1,chartAxes:[{primary:!0,type:"time",time:{unit:"day"},position:"bottom"},{type:"linear",position:"left"}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareDataForChart",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.reverse().map((function(e,t){var n=w.a.unix(e.t).tz("Europe/Rome");a[t]={label:n.format("DD-MM-YYYY"),data:[[n.toDate(),e.c]]}}));case 3:return e.next=5,this.setState({dataForChart:a});case 5:return e.next=7,this.setState({isReadyChart:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterSingleDate",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,l,c,i,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w()(t).tz("America/New_York").format("YYYY-MM-DD"),r=w()(n).format("X"),r=parseInt(r)+3600,l=r-86400,e.next=6,a.filter((function(e){return e.t>l&&e.t<=r}));case 6:return c=e.sent,this.updateChart(c),i=0,o=0,s=0,c.length>0&&(i=c[0].d,o=c[0].r,s=c[0].c),e.abrupt("return",{deathInWorld:i,healedInWorld:o,casesInWorld:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"filterMultipleDates",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,l,c,i,o,s,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w()(t[0]).tz("GMT").format("YYYY-MM-DD"),r=w()(t[1]).tz("GMT").format("YYYY-MM-DD"),l=w()(n).format("X"),c=parseInt(w()(r).format("X")),c+=3600,e.next=7,a.filter((function(e){return e.t>=l&&e.t<=c}));case 7:return i=e.sent,this.updateChart(i),o=0,s=0,u=0,(d=i.length)>0&&((m=i[d-1]).d||(m=this.getLastNotEmptyDate(i)),o=i[0].d,s=i[0].r,u=i[0].c,d>1&&(o=m.d-o,s=m.r-s,u=m.c-u,console.log(m),console.log(o),console.log(u))),e.abrupt("return",{deathInWorld:o,healedInWorld:s,casesInWorld:u});case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getLastNotEmptyDate",value:function(e){for(var t=0;t<=e.length;t++)if(e[t])return e[t];return null}},{key:"_handleToggleCalendar",value:function(){this.setState({showCalendar:!this.state.showCalendar})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.lastUpdate,n=e.showCalendar,l=e.dataForChart,c=e.chartAxes,i=e.isReadyChart,o=e.period,s=null;if(a instanceof Date){var u=a.getMonth()+1;s=a.getDate()+"/"+u+"/"+a.getFullYear()}var d=!t&&i?r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-center row",style:{paddingLeft:30}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{style:{display:"flex",flex:1,marginRight:35,justifyContent:"flex-end"}},r.a.createElement(y,{size:"medium",checked:n,onChange:this._handleToggleCalendar}))),r.a.createElement("div",{className:"flex-row-start col-md-6"},n?r.a.createElement(g,{dates:o,onChange:this._handleChangeCalendar}):null)),i?r.a.createElement(O,{data:l,axes:c}):null,i?r.a.createElement(C,Object.assign({},this.state,{formattedDate:s})):null):r.a.createElement(j,null);return r.a.createElement("div",{className:"home"},d)}}]),a}(n.Component),I=a(37),S=a.n(I),M=a(152),Y=a(149),_=a(154),L=a(150),T=(a(115),a(148));function W(e){return r.a.createElement(M.a,{className:"drawer",anchor:e.anchor,open:e.open,onClose:function(){return e.onClose()}},r.a.createElement(Y.a,{className:"drawer-list"},[{name:"HomePage",icon:"fa fa-globe",isLink:!0,link:"HomePage"},{name:"Nations",icon:"fa fa-location-arrow",isLink:!0,link:"Nations"}].map((function(t,a){return r.a.createElement(T.a,{key:a},r.a.createElement(_.a,{key:a,button:!0,onClick:function(){return e.onItemClick(t.link)},className:"drawer-list-item"},r.a.createElement("i",{className:t.icon}),r.a.createElement(L.a,{className:"ml-4 pt-2",primary:r.a.createElement("p",null,t.name)})))}))))}var P=a(69);a(116);function F(e){var t=e.data,a=t.todayCases,n=t.todayDeaths,l=t.casesPerOneMillion,c=t.deathsPerOneMillion,i=e.data,o=i.cases,s=i.deaths,u=i.recovered,d=i.active,m=i.critical;return r.a.createElement("div",{className:"flex flex-center mt-5 p-10"},r.a.createElement("div",{className:"flex flex-center row col-md-12"},r.a.createElement(T.a,{className:"col-md-5 mr-5 mb-5 nation-data-box"},r.a.createElement("div",{className:"p-5"},r.a.createElement("p",null,"Today"),r.a.createElement("p",null,"Cases:  ",null!==a&&void 0!==a?a:0),r.a.createElement("p",null,"Deaths: ",null!==n&&void 0!==n?n:0),r.a.createElement("p",null,"Cases per one milion: ",null!==l&&void 0!==l?l:0),r.a.createElement("p",null,"Cases per one milion: ",null!==c&&void 0!==c?c:0))),r.a.createElement(T.a,{className:"col-md-5 mr-5 mb-5 nation-data-box "},r.a.createElement("div",{className:"p-5"},r.a.createElement("p",null,"Total"),r.a.createElement("p",null,"Cases:  ",null!==o&&void 0!==o?o:0),r.a.createElement("p",null,"Deaths: ",null!==s&&void 0!==s?s:0),r.a.createElement("p",null,"Recovered: ",null!==u&&void 0!==u?u:0),r.a.createElement("p",null,"Critical: ",null!==m&&void 0!==m?m:0),r.a.createElement("p",null,"Active: ",null!==d&&void 0!==d?d:0)))))}var A=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._handleOnChange=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return n.setState({selectedOption:t,isLoading:!0}),e.next=4,n.fetchData(t);case 4:e.next=7;break;case 6:n.setState({selectedOption:null,data:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!0,selectedOption:null,nations:[],data:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://restcountries.eu/rest/v2/all").then((function(e){var a=[];e.data.map((function(e){return"United States of America"==e.name&&(e.name="USA"),a[a.length]={value:e.name.toLowerCase(),label:e.name},!0})),t.setState({nations:a})})).then((function(){return t.setState({isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://coronavirus-19-api.herokuapp.com/countries/"+t.value).then((function(e){var t=e.data;200===e.status&&a.setState({data:t})})).then((function(){return a.setState({isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.nations,a=e.isLoading,n=e.selectedOption,l=e.data,c=l?r.a.createElement(F,{data:l}):null,i=a?r.a.createElement(j,null):r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-center mt-5"},r.a.createElement("h2",null,r.a.createElement("p",{className:"text-white"},"Please select a nation"))),r.a.createElement("div",{className:"flex flex-center"},r.a.createElement(P.a,{className:"nation-select",name:"form-field-name",placeholder:"Select a nation",value:n,onChange:this._handleOnChange,options:t})),c);return r.a.createElement("div",{className:"App"},i)}}]),a}(n.Component),z=a(151),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).toggleDrawer=function(e){return n.setState({openDrawer:e})},n.state={openDrawer:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state.openDrawer,a=this.props.drawerItemClick;return r.a.createElement("div",null,r.a.createElement(W,{onItemClick:function(e){return a(e)},anchor:"left",open:t,onClose:function(){return e.toggleDrawer(!1)}}),r.a.createElement("header",{className:"App-header p-2   "},r.a.createElement("a",{href:"#",onClick:function(){return a("HomePage")}},"Covid Site"),r.a.createElement("div",{className:"flex justify-content-end"},r.a.createElement(z.a,{variant:"outlined",onClick:function(){return e.toggleDrawer(!0)}},r.a.createElement("i",{className:"fa fa-bars fa-3x "})))))}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._handleDrawerItemClick=function(e){return n.setState({currentPage:e,openDrawer:!1})},n.state={isLoading:!0,datas:null,dataPerDate:null,openDrawer:!1,currentPage:"HomePage"},n._handleDrawerItemClick=n._handleDrawerItemClick.bind(Object(p.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.a.get("https://enrichman.github.io/covid19/world/data.json").then((function(t){var a=t.data;e.setState({datas:a,dataPerDate:a.ts.reverse()})})).then((function(){return e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.isLoading?r.a.createElement(j,null):r.a.createElement("div",null,r.a.createElement(R,{openDrawer:!0,drawerItemClick:function(t){return e._handleDrawerItemClick(t)}}),this.renderSwitchComponent());return r.a.createElement("div",{className:"App"},t)}},{key:"renderSwitchComponent",value:function(){var e=this.state,t=e.datas,a=e.dataPerDate;switch(e.currentPage){case"HomePage":return r.a.createElement(N,{items:t,itemsPerDate:a});case"Nations":return r.a.createElement(A,null);default:return r.a.createElement(N,null)}}}]),a}(n.Component),U=a(44),X=a(14),B=Object(X.a)();function G(){return r.a.createElement(U.a,{history:B,basename:"/covid-stats"},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:H}),r.a.createElement(d.a,{path:"/home",component:N}),r.a.createElement(d.a,{path:"/nations",component:A})))}var J=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(G,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(118)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.25cc4de1.chunk.js.map