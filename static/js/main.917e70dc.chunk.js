(this["webpackJsonpCodive-site"]=this["webpackJsonpCodive-site"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},138:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),o=(a(103),a(19)),i=a(20),s=a(21),u=a(22),d=(a(104),a(33)),m=a(6),p=a.n(m),h=a(14),f=a(36),v=(a(106),a(82)),E=a.n(v),g=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.dates;return r.a.createElement(E.a,{value:t,options:{mode:"range",dateFormat:"d/m/Y",enableTime:!0},onChange:function(t){return e.props.onChange(t)}})}}]),a}(n.Component);var b=function(e){var t=e.casesInWorld,a=e.deathInWorld,n=e.healedInWorld,l=e.formattedDate;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-column p-10"},r.a.createElement("div",null,r.a.createElement("p",null,"Total Coronavirus cases in the world : ",new Intl.NumberFormat("it-IT").format(t))),r.a.createElement("div",null,r.a.createElement("p",null,"Total deaths in the world : ",new Intl.NumberFormat("it-IT").format(a))),r.a.createElement("div",null,r.a.createElement("p",null,"Total healed in the world : ",new Intl.NumberFormat("it-IT").format(n))),r.a.createElement("div",null,r.a.createElement("p",null," Last update info : ",l))))},C=a(25),w=a.n(C),x=(a(111),a(181)),k=a(173);var y=function(e){return r.a.createElement(k.a,{control:r.a.createElement(x.a,{size:e.size,checked:e.checked,onChange:function(){return e.onChange()}}),label:"Filter per date"})},O=a(86);function D(e){var t=r.a.useMemo((function(){return{type:"area"}}),[]),a=e.data;return a.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"container",style:{height:"600px",display:"flex",flex:1}},r.a.createElement(O.Chart,{data:a,series:t,axes:e.axes,tooltip:!0}))):r.a.createElement("div",null,r.a.createElement("p",null,"No data available"))}var j=function(e){return r.a.createElement("div",{className:"loader center"},r.a.createElement("i",{className:"fa fa-cog fa-spin fa-7x"}))},N=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._handleChangeCalendar=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isReadyChart:!1,isLoading:!0,dataForChart:null}),a=null,r=n.state.timeseries,!(t.length>1)){e.next=9;break}return e.next=6,n.filterMultipleDates(t,r);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,n.filterSingleDate(t[0],r);case 11:a=e.sent;case 12:return e.next=14,n.setState({casesInWorld:a.casesInWorld,deathInWorld:a.deathInWorld,healedInWorld:a.healedInWorld,period:t});case 14:return e.next=16,n.setState({isReadyChart:!0,isLoading:!1});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!0,deathInWorld:0,casesInWorld:0,healedInWorld:0,lastUpdate:null,showCalendar:!1,timeseries:null,period:null},n._handleChangeCalendar=n._handleChangeCalendar.bind(Object(f.a)(n)),n._handleToggleCalendar=n._handleToggleCalendar.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.items){e.next=8;break}return t=this.props.items,e.next=4,this.setInitialState(t);case 4:return e.next=6,this.updateChart(this.state.timeseries);case 6:return e.next=8,this.setState({isReadyChart:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateChart",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filteredTimeseries:t});case 2:return e.next=4,this.prepareDataForChart(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInitialState",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({deathInWorld:t.deaths,casesInWorld:t.confirmed,healedInWorld:t.recovered,lastUpdate:new Date(t.last_update),isLoading:!1,timeseries:t.ts,filteredTimeseries:[],dataForChart:null,isReadyChart:!1,chartAxes:[{primary:!0,type:"time",time:{unit:"day"},position:"bottom"},{type:"linear",position:"left"}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareDataForChart",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.reverse().map((function(e,t){var n=w.a.unix(e.t).tz("Europe/Rome");a[t]={label:n.format("DD-MM-YYYY"),data:[[n.toDate(),e.c]]}}));case 3:return e.next=5,this.setState({dataForChart:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterSingleDate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r,l,c,o,i,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w()(t).tz("America/New_York").format("YYYY-MM-DD"),r=w()(n).format("X"),r=parseInt(r)+3600,l=r-86400,e.next=6,a.filter((function(e){return e.t>l&&e.t<=r}));case 6:return c=e.sent,e.next=9,a.filter((function(e){return e.t>=l&&e.t<=l}));case 9:return o=e.sent,e.next=12,this.updateChart(c);case 12:return i=0,s=0,u=0,c.length>0&&(i=c[0].d-o[0].d,s=c[0].r-o[0].r,u=c[0].c-o[0].c),e.abrupt("return",{deathInWorld:i,healedInWorld:s,casesInWorld:u});case 18:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"filterMultipleDates",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r,l,c,o,i,s,u,d,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w()(t[0]).tz("GMT").format("YYYY-MM-DD"),r=w()(t[1]).tz("GMT").format("YYYY-MM-DD"),l=w()(n).format("X"),c=parseInt(w()(r).format("X")),c+=3600,e.next=7,a.filter((function(e){return e.t>=l&&e.t<=c}));case 7:return o=e.sent,this.updateChart(o),i=0,s=0,u=0,(d=o.length)>0&&((m=o[d-1]).d||(m=this.getLastNotEmptyDate(o)),i=o[0].d,s=o[0].r,u=o[0].c,d>1&&(i=m.d-i,s=m.r-s,u=m.c-u)),e.abrupt("return",{deathInWorld:i,healedInWorld:s,casesInWorld:u});case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getLastNotEmptyDate",value:function(e){for(var t=0;t<=e.length;t++)if(e[t])return e[t];return null}},{key:"_handleToggleCalendar",value:function(){this.setState({showCalendar:!this.state.showCalendar})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.lastUpdate,n=e.showCalendar,l=e.dataForChart,c=e.chartAxes,o=e.isReadyChart,i=e.period,s=null;if(a instanceof Date){var u=a.getMonth()+1;s=a.getDate()+"/"+u+"/"+a.getFullYear()}var d=!t&&o?r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-center row",style:{paddingLeft:30}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{style:{display:"flex",flex:1,marginRight:35,justifyContent:"flex-end"}},r.a.createElement(y,{size:"medium",checked:n,onChange:this._handleToggleCalendar}))),r.a.createElement("div",{className:"flex-row-start col-md-6"},n?r.a.createElement(g,{dates:i,onChange:this._handleChangeCalendar}):null)),o?r.a.createElement(D,{data:l,axes:c}):null,r.a.createElement(b,Object.assign({},this.state,{formattedDate:s}))):r.a.createElement(j,null);return r.a.createElement("div",{className:"home"},d)}}]),a}(n.Component),I=a(37),S=a.n(I),M=a(87),W=(a(137),a(176));function L(e){var t=e.data,a=t.todayCases,n=t.todayDeaths,l=t.casesPerOneMillion,c=t.deathsPerOneMillion,o=e.data,i=o.cases,s=o.deaths,u=o.recovered,d=o.active,m=o.critical;return r.a.createElement("div",{className:"flex flex-center mt-5 p-10"},r.a.createElement("div",{className:"flex flex-center row col-md-12"},r.a.createElement(W.a,{className:"col-md-5 mr-5 mb-5 nation-data-box"},r.a.createElement("div",{className:"p-5"},r.a.createElement("p",null,"Today"),r.a.createElement("p",null,"Cases:  ",null!==a&&void 0!==a?a:0),r.a.createElement("p",null,"Deaths: ",null!==n&&void 0!==n?n:0),r.a.createElement("p",null,"Cases per one milion: ",null!==l&&void 0!==l?l:0),r.a.createElement("p",null,"Cases per one milion: ",null!==c&&void 0!==c?c:0))),r.a.createElement(W.a,{className:"col-md-5 mr-5 mb-5 nation-data-box "},r.a.createElement("div",{className:"p-5"},r.a.createElement("p",null,"Total"),r.a.createElement("p",null,"Cases:  ",null!==i&&void 0!==i?i:0),r.a.createElement("p",null,"Deaths: ",null!==s&&void 0!==s?s:0),r.a.createElement("p",null,"Recovered: ",null!==u&&void 0!==u?u:0),r.a.createElement("p",null,"Critical: ",null!==m&&void 0!==m?m:0),r.a.createElement("p",null,"Active: ",null!==d&&void 0!==d?d:0)))))}var T=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._handleOnChange=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return n.setState({selectedOption:t,isLoading:!0}),e.next=4,n.fetchData(t);case 4:e.next=7;break;case 6:n.setState({selectedOption:null,data:null});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!0,selectedOption:null,nations:[],data:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://restcountries.eu/rest/v2/all").then((function(e){var a=[];e.data.map((function(e){return"United States of America"===e.name&&(e.name="USA"),a[a.length]={value:e.name.toLowerCase(),label:e.name},!0})),t.setState({nations:a})})).then((function(){return t.setState({isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://coronavirus-19-api.herokuapp.com/countries/"+t.value).then((function(e){var t=e.data;200===e.status&&a.setState({data:t})})).then((function(){return a.setState({isLoading:!1})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.nations,a=e.isLoading,n=e.selectedOption,l=e.data,c=l?r.a.createElement(L,{data:l}):null,o=a?r.a.createElement(j,null):r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-center mt-5"},r.a.createElement("h2",null,r.a.createElement("p",{className:"text-white"},"Please select a nation"))),r.a.createElement("div",{className:"flex flex-center"},r.a.createElement(M.a,{className:"nation-select",name:"form-field-name",placeholder:"Select a nation",value:n,onChange:this._handleOnChange,options:t})),c);return r.a.createElement("div",{className:"App"},o)}}]),a}(n.Component),Y=a(179),P=a(180),_=a(177),A=a(182),F=a(178);a(138);function R(e){return r.a.createElement(P.a,{className:"drawer",anchor:e.anchor,open:e.open,onClose:function(){return e.onClose()}},r.a.createElement(_.a,{className:"drawer-list"},[{name:"HomePage",icon:"fa fa-globe",isLink:!0,link:"HomePage"},{name:"World Map",icon:"fa fa-globe",isLink:!0,link:"WorldMap"},{name:"Nations",icon:"fa fa-location-arrow",isLink:!0,link:"Nations"}].map((function(t,a){return r.a.createElement(W.a,{key:a},r.a.createElement(A.a,{key:a,button:!0,onClick:function(){return e.onItemClick(t.link)},className:"drawer-list-item"},r.a.createElement("i",{className:t.icon}),r.a.createElement(F.a,{className:"ml-4 pt-2",primary:r.a.createElement("p",null,t.name)})))}))))}var z=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).toggleDrawer=function(e){return n.setState({openDrawer:e})},n.state={openDrawer:!1},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.openDrawer,a=this.props.drawerItemClick;return r.a.createElement("div",null,r.a.createElement(R,{onItemClick:function(e){return a(e)},anchor:"left",open:t,onClose:function(){return e.toggleDrawer(!1)}}),r.a.createElement("header",{className:"App-header p-2   "},r.a.createElement("a",{href:"#",onClick:function(){return a("HomePage")}},r.a.createElement("i",{className:"fa fa-globe fa-2x mr-3"}),"Covid Site"),r.a.createElement("div",{className:"flex justify-content-end"},r.a.createElement(Y.a,{variant:"outlined",onClick:function(){return e.toggleDrawer(!0)}},r.a.createElement("i",{className:"fa fa-bars fa-3x "})))))}}]),a}(n.Component),U=a(91),G=a(48),H=function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"United States of America"===t&&(t="usa"),a=null,e.next=4,S.a.get("https://coronavirus-19-api.herokuapp.com/countries/"+t).then((function(e){console.log(e);var t=e.data;if(200!==e.status)return!1;a=t}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=Object(n.memo)((function(e){var t=e.setTooltipContent,a=function(){var e=Object(h.a)(p.a.mark((function e(a,n){var r,l,c,o,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(a);case 2:s=e.sent,t("".concat(a,"  <br/>\n         Cases: ").concat(null!==(r=s.cases)&&void 0!==r?r:0," <br/>\n         Deaths: ").concat(null!==(l=s.deaths)&&void 0!==l?l:0," <br/>\n         Recovered: ").concat(null!==(c=s.recovered)&&void 0!==c?c:0," <br/>\n         Active: ").concat(null!==(o=s.active)&&void 0!==o?o:0," <br/>\n         Critical: ").concat(null!==(i=s.critical)&&void 0!==i?i:0," <br/>\n        "));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(G.ComposableMap,{"data-tip":"",projectionConfig:{scale:200}},r.a.createElement(G.ZoomableGroup,null,r.a.createElement(G.Geographies,{geography:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},(function(e){return e.geographies.map((function(e){return r.a.createElement(G.Geography,{key:e.rsmKey,geography:e,onMouseEnter:function(){var t=e.properties,n=t.NAME,r=t.POP_EST;a(n,r)},onMouseLeave:function(){t("")},style:{default:{fill:"#D6D6DA",outline:"none"},hover:{fill:"#F53",outline:"none"},pressed:{fill:"#E42",outline:"none"}}})}))}))))})),B=a(89);function J(e){var t=Object(n.useState)(""),a=Object(U.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(X,{setTooltipContent:c}),r.a.createElement(B.a,{html:!0},l))}var K=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._handleDrawerItemClick=function(e){return n.setState({currentPage:e,openDrawer:!1})},n.state={isLoading:!0,datas:null,dataPerDate:null,openDrawer:!1,currentPage:"HomePage"},n._handleDrawerItemClick=n._handleDrawerItemClick.bind(Object(f.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.a.get("https://enrichman.github.io/covid19/world/data.json").then((function(t){var a=t.data;e.setState({datas:a,dataPerDate:a.ts.reverse()})})).then((function(){return e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.isLoading?r.a.createElement(j,null):r.a.createElement("div",null,r.a.createElement(z,{openDrawer:!0,drawerItemClick:function(t){return e._handleDrawerItemClick(t)}}),this.renderSwitchComponent());return r.a.createElement("div",{className:"App"},t)}},{key:"renderSwitchComponent",value:function(){var e=this.state,t=e.datas,a=e.dataPerDate;switch(e.currentPage){case"HomePage":return r.a.createElement(N,{items:t,itemsPerDate:a});case"Nations":return r.a.createElement(T,null);default:return r.a.createElement(J,null)}}}]),a}(n.Component),Z=a(60),$=a(16),q=Object($.a)();function Q(){return r.a.createElement(Z.a,{basename:"/covid-stats"},r.a.createElement(d.a,{history:q},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:K}),r.a.createElement(d.a,{path:"/home",component:N}),r.a.createElement(d.a,{path:"/nations",component:T}))))}var V=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(Q,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,a){e.exports=a(142)}},[[98,1,2]]]);
//# sourceMappingURL=main.917e70dc.chunk.js.map