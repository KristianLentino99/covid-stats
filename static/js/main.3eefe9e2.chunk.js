(this["webpackJsonpCodive-site"]=this["webpackJsonpCodive-site"]||[]).push([[0],{120:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),c=(a(85),a(13)),i=a(14),s=a(15),u=a(16),d=(a(86),a(30)),m=a(21),h=a.n(m),f=a(33),p=a(28),v=a(160),g=a(161),C=a(163);var E=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{defaultActiveKey:"1"},r.a.createElement(g.a,null,r.a.createElement(g.a.Header,null,r.a.createElement(v.a.Toggle,{as:C.a,variant:"link",eventKey:"0"},function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(1e3*e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=a.getFullYear(),l=n[a.getMonth()],o=a.getDate(),c=a.getHours(),i=a.getMinutes(),s=a.getSeconds(),u=o+" "+l+" "+r;return t||(u+=" "+c+":"+i+":"+s),u}(this.props.maintext))),r.a.createElement(v.a.Collapse,{eventKey:"0"},r.a.createElement(g.a.Body,null,"Cases : ",this.props.cases," ",r.a.createElement("br",null),"Deaths : ",this.props.deaths," ",r.a.createElement("br",null),"Recovered : ",this.props.recovered))))}}]),a}(n.Component),b=(n.Component,a(90),a(72)),w=a.n(b),y=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={date_start:new Date,date_end:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{value:this.state.date_start,options:{mode:"range",dateFormat:"d/m/Y",enableTime:!0},onChange:function(t){return e.props.onChange(t)}})}}]),a}(n.Component);var k=function(e){var t=e.casesInWorld,a=e.deathInWorld,n=e.healedInWorld,l=e.formattedDate;return r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-column p-10"},r.a.createElement("div",null,r.a.createElement("p",null,"Total Coronavirus cases in the world : ",new Intl.NumberFormat("it-IT").format(t))),r.a.createElement("div",null,r.a.createElement("p",null,"Total deaths in the world : ",new Intl.NumberFormat("it-IT").format(a))),r.a.createElement("div",null,r.a.createElement("p",null,"Total healed in the world : ",new Intl.NumberFormat("it-IT").format(n))),r.a.createElement("div",null,r.a.createElement("p",null," Last update info : ",l))))},D=a(24),j=a.n(D),O=(a(93),a(162)),x=a(152);var I=function(e){return r.a.createElement(x.a,{control:r.a.createElement(O.a,{size:e.size,checked:e.checked,onChange:function(){return e.onChange()}}),label:"Filter per date"})},N=(a(97),a(73));function S(e){var t=r.a.useMemo((function(){return{type:"area"}}),[]);return r.a.createElement("div",null,r.a.createElement("p",null,"Scale 1:1000"),r.a.createElement("div",{className:"container",style:{height:"600px",display:"flex",flex:1}},r.a.createElement(N.Chart,{data:e.data,series:t,axes:e.axes,tooltip:!0})))}var M=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._handleChangeCalendar=function(){var e=Object(f.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isReadyChart:!1,dataForChart:null}),a=null,r=n.state.timeseries,a=t.length>1?n.filterMultipleDates(t,r):n.filterSingleDate(t[0],r),n.setState(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!0,deathInWorld:0,casesInWorld:0,healedInWorld:0,lastUpdate:null,showCalendar:!1,timeseries:null},n._handleChangeCalendar=n._handleChangeCalendar.bind(Object(p.a)(n)),n._handleToggleCalendar=n._handleToggleCalendar.bind(Object(p.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.items){e.next=6;break}return t=this.props.items,e.next=4,this.setInitialState(t);case 4:return e.next=6,this.updateChart(this.state.timeseries);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateChart",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({filteredTimeseries:t});case 2:return e.next=4,this.prepareDataForChart(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInitialState",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({deathInWorld:t.deaths,casesInWorld:t.confirmed,healedInWorld:t.recovered,lastUpdate:new Date(t.last_update),isLoading:!1,timeseries:t.ts,filteredTimeseries:[],dataForChart:null,isReadyChart:!1,chartAxes:[{primary:!0,type:"time",position:"bottom"},{type:"linear",position:"left"}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareDataForChart",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.reverse().map((function(e,t){var n=j.a.unix(e.t).tz("Europe/Rome");a[t]={label:n.format("DD-MM-YYYY"),data:[[n.toDate(),e.c/1e3]]}}));case 3:return console.log(a),e.next=6,this.setState({dataForChart:a});case 6:return e.next=8,this.setState({isReadyChart:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterSingleDate",value:function(e,t){var a=j()(e).tz("America/New_York").format("YYYY-MM-DD"),n=j()(a).format("X");n=parseInt(n)+3600;var r=t.filter((function(e){return e.t>=n&&e.t<=n}));this.updateChart(r);var l=0,o=0,c=0;return r.length>0&&(l=r[0].d,o=r[0].r,c=r[0].c),{deathInWorld:l,healedInWorld:o,casesInWorld:c}}},{key:"filterMultipleDates",value:function(){var e=Object(f.a)(h.a.mark((function e(t,a){var n,r,l,o,c,i,s,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j()(t[0]).tz("GMT").format("YYYY-MM-DD"),r=j()(t[1]).tz("GMT").format("YYYY-MM-DD"),l=j()(n).format("X"),o=parseInt(j()(r).format("X")),o+=3600,e.next=7,a.filter((function(e){return e.t>=l&&e.t<=o}));case 7:return c=e.sent,console.log(c),this.updateChart(c),i=0,s=0,u=0,(d=c.length)>0&&((m=c[d-1]).d||(m=this.getLastNotEmptyDate(c)),i=c[0].d,s=c[0].r,u=c[0].c,d>1&&(i=m.d-i,s=m.r-s,u=m.c-u)),e.abrupt("return",{deathInWorld:i,healedInWorld:s,casesInWorld:u});case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getLastNotEmptyDate",value:function(e){for(var t=0;t<=e.length;t++)if(e[t])return e[t];return null}},{key:"_handleToggleCalendar",value:function(){this.setState({showCalendar:!this.state.showCalendar})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.lastUpdate,n=e.showCalendar,l=e.dataForChart,o=e.chartAxes,c=e.isReadyChart,i=null;if(a instanceof Date){var s=a.getMonth()+1;i=a.getDate()+"/"+s+"/"+a.getFullYear()}var u=t?null:r.a.createElement("div",{className:"mt-5"},r.a.createElement("div",{className:"flex flex-center row",style:{paddingLeft:30}},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("p",{style:{display:"flex",flex:1,marginRight:35,justifyContent:"flex-end"}},r.a.createElement(I,{size:"medium",checked:n,onChange:this._handleToggleCalendar}))),r.a.createElement("div",{className:"flex-row-start col-md-6"},this.state.showCalendar?r.a.createElement(y,{onChange:this._handleChangeCalendar}):null)),c?r.a.createElement(S,{data:l,axes:o}):null,r.a.createElement(k,Object.assign({},this.state,{formattedDate:i})));return r.a.createElement("div",{className:"home"},u)}}]),a}(n.Component),_=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader center"},r.a.createElement("i",{className:"fa fa-cog fa-spin fa-7x"}))}}]),a}(n.Component),Y=a(74),W=a.n(Y),T=a(158),F=a(159),L=a(156),P=a(164),A=a(157),z=(a(120),a(155));function R(e){return r.a.createElement(F.a,{className:"drawer",anchor:e.anchor,open:e.open,onClose:function(){return e.onClose()}},r.a.createElement(L.a,{className:"drawer-list"},[{name:"HomePage",icon:"fa fa-globe",isLink:!0,link:"HomePage"},{name:"Nations",icon:"fa fa-location-arrow",isLink:!0,link:"Nations"}].map((function(t,a){return r.a.createElement(z.a,{key:a},r.a.createElement(P.a,{key:a,button:!0,onClick:function(){return e.onItemClick(t.link)},className:"drawer-list-item"},r.a.createElement("i",{className:t.icon}),r.a.createElement(A.a,{className:"ml-4 pt-2",primary:r.a.createElement("p",null,t.name)})))}))))}var H=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Nations"))}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e))._handleCloseDrawer=function(){return n.setState({openDrawer:!1})},n._handleDrawerItemClick=function(e){return n.setState({currentPage:e})},n.toggleDrawer=function(e){return n.setState({openDrawer:e})},n.state={isLoading:!0,datas:null,dataPerDate:null,openDrawer:!1,currentPage:"HomePage"},n._handleCloseDrawer=n._handleCloseDrawer.bind(Object(p.a)(n)),n._handleDrawerItemClick=n._handleDrawerItemClick.bind(Object(p.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;W.a.get("https://enrichman.github.io/covid19/world/data.json").then((function(t){var a=t.data;e.setState({datas:a,dataPerDate:a.ts.reverse()})})).then((function(){return e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.openDrawer;console.log(this.state.datas);var a=this.state.isLoading?r.a.createElement(_,null):r.a.createElement("div",null,r.a.createElement(R,{onItemClick:this._handleDrawerItemClick,anchor:"left",open:t,onClose:this._handleCloseDrawer}),r.a.createElement("header",{className:"App-header p-2   "},r.a.createElement("p",null,"Covid Site"),r.a.createElement("div",{className:"flex justify-content-end"},r.a.createElement(T.a,{variant:"outlined",onClick:function(){return e.toggleDrawer(!0)}},r.a.createElement("i",{className:"fa fa-bars fa-3x "})))),this.renderSwitchComponent());return r.a.createElement("div",{className:"App"},a)}},{key:"renderSwitchComponent",value:function(){var e=this.state,t=e.datas,a=e.dataPerDate;switch(e.currentPage){case"HomePage":return r.a.createElement(M,{items:t,itemsPerDate:a});case"Nations":return r.a.createElement(H,null)}}}]),a}(n.Component),B=a(38),K=a(18),U=Object(K.a)();function X(){return r.a.createElement(B.a,{history:U,basename:"/covid-stats"},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:J}),r.a.createElement(d.a,{path:"/home",component:M}),r.a.createElement(d.a,{path:"/nations",component:H})))}var G=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(X,null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,a){e.exports=a(122)},85:function(e,t,a){},86:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.3eefe9e2.chunk.js.map